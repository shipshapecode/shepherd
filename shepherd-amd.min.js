/*! shepherd 0.6.14 */
!function(t,e){"function"==typeof define&&define.amd?define(["tether"],e):"object"==typeof exports?module.exports=e(require("tether")):t.Shepherd=e(t.Tether)}(this,function(t){return function(){var e,n,i,r,s,o,h,l,u,p,c,d,a,f,v,m=function(t,e){return function(){return t.apply(e,arguments)}},y={}.hasOwnProperty,g=function(t,e){function n(){this.constructor=t}for(var i in e)y.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};v=t.Utils,l=v.extend,a=v.removeClass,o=v.addClass,p=v.hasClass,n=v.Evented,u=v.getBounds,f=v.uniqueId,i=new n,e={top:"bottom center",left:"middle right",right:"middle left",bottom:"top center",center:"middle center"},h=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.children[0]},c=function(t,e){var n,i,r,s,o,h;return n=null!=(i=null!=(r=null!=(s=null!=(o=null!=(h=t.matches)?h:t.matchesSelector)?o:t.msMatchesSelector)?s:t.webkitMatchesSelector)?r:t.mozMatchesSelector)?i:t.oMatchesSelector,n.call(t,e)},d=function(t,e){var n,i,r,s,o,h;if(null==t)return t;if("object"==typeof t)return t;for(s=t.split(" "),s.length>e.length&&(s[0]=s.slice(0,+(s.length-e.length)+1||9e9).join(" "),s.splice(1,s.length-e.length)),i={},n=o=0,h=e.length;h>o;n=++o)r=e[n],i[r]=s[n];return i},r=function(n){function i(t,e){this.tour=t,this.destroy=m(this.destroy,this),this.scrollTo=m(this.scrollTo,this),this.complete=m(this.complete,this),this.cancel=m(this.cancel,this),this.isOpen=m(this.isOpen,this),this.hide=m(this.hide,this),this.show=m(this.show,this),this.setOptions(e)}return g(i,n),i.prototype.setOptions=function(t){var e,n,i,r;if(this.options=null!=t?t:{},this.destroy(),this.id=this.options.id||this.id||"step-"+f(),this.options.when){r=this.options.when;for(e in r)n=r[e],this.on(e,n,this)}return null!=(i=this.options).buttons?(i=this.options).buttons:i.buttons=[{text:"Next",action:this.tour.next}]},i.prototype.getTour=function(){return this.tour},i.prototype.bindAdvance=function(){var t,e,n,i,r=this;return i=d(this.options.advanceOn,["selector","event"]),t=i.event,n=i.selector,e=function(t){if(r.isOpen())if(null!=n){if(c(t.target,n))return r.tour.next()}else if(r.el&&t.target===r.el)return r.tour.next()},document.body.addEventListener(t,e),this.on("destroy",function(){return document.body.removeEventListener(t,e)})},i.prototype.getAttachTo=function(){var t;if(t=d(this.options.attachTo,["element","on"]),null==t&&(t={}),"string"==typeof t.element&&(t.element=document.querySelector(t.element),null==t.element))throw new Error("Shepherd step's attachTo was not found in the page");return t},i.prototype.setupTether=function(){var n,i,r;if("undefined"==typeof t||null===t)throw new Error("Using the attachment feature of Shepherd requires the Tether library");return i=this.getAttachTo(),n=e[i.on||"right"],null==i.element&&(i.element="viewport",n="middle center"),r={classPrefix:"shepherd",element:this.el,constraints:[{to:"window",pin:!0,attachment:"together"}],target:i.element,offset:i.offset||"0 0",attachment:n},this.tether=new t(l(r,this.options.tetherOptions))},i.prototype.show=function(){var t=this;return null==this.el&&this.render(),o(this.el,"shepherd-open"),document.body.setAttribute("data-shepherd-step",this.id),this.setupTether(),this.options.scrollTo&&setTimeout(function(){return t.scrollTo()}),this.trigger("show")},i.prototype.hide=function(){var t;return a(this.el,"shepherd-open"),document.body.removeAttribute("data-shepherd-step"),null!=(t=this.tether)&&t.destroy(),this.tether=null,this.trigger("hide")},i.prototype.isOpen=function(){return p(this.el,"shepherd-open")},i.prototype.cancel=function(){return this.tour.cancel(),this.trigger("cancel")},i.prototype.complete=function(){return this.tour.complete(),this.trigger("complete")},i.prototype.scrollTo=function(){var t;return t=this.getAttachTo().element,null!=this.options.scrollToHandler?this.options.scrollToHandler(t):null!=t?t.scrollIntoView():void 0},i.prototype.destroy=function(){var t;return null!=this.el&&(document.body.removeChild(this.el),delete this.el),null!=(t=this.tether)&&t.destroy(),this.tether=null,this.trigger("destroy")},i.prototype.render=function(){var t,e,n,i,r,s,o,l,u,p,c,d,a,f,v,m,y;if(null!=this.el&&this.destroy(),this.el=h("<div class='shepherd-step "+(null!=(v=this.options.classes)?v:"")+"' data-id='"+this.id+"'></div>"),i=document.createElement("div"),i.className="shepherd-content",this.el.appendChild(i),s=document.createElement("header"),i.appendChild(s),null!=this.options.title&&(s.innerHTML+="<h3 class='shepherd-title'>"+this.options.title+"</h3>",this.el.className+=" shepherd-has-title"),this.options.showCancelLink&&(o=h("<a href class='shepherd-cancel-link'>âœ•</a>"),s.appendChild(o),this.el.className+=" shepherd-has-cancel-link",this.bindCancelLink(o)),null!=this.options.text){if(p=h("<div class='shepherd-text'></div>"),u=this.options.text,"function"==typeof u&&(u=this.options.text.call(this,p)),u instanceof HTMLElement)p.appendChild(u);else for("string"==typeof u&&(u=[u]),c=0,a=u.length;a>c;c++)l=u[c],p.innerHTML+="<p>"+l+"</p>";i.appendChild(p)}if(r=document.createElement("footer"),this.options.buttons){for(e=h("<ul class='shepherd-buttons'></ul>"),m=this.options.buttons,d=0,f=m.length;f>d;d++)n=m[d],t=h("<li><a class='shepherd-button "+(null!=(y=n.classes)?y:"")+"'>"+n.text+"</a>"),e.appendChild(t),this.bindButtonEvents(n,t.querySelector("a"));r.appendChild(e)}return i.appendChild(r),document.body.appendChild(this.el),this.setupTether(),this.options.advanceOn?this.bindAdvance():void 0},i.prototype.bindCancelLink=function(t){var e=this;return t.addEventListener("click",function(t){return t.preventDefault(),e.cancel()})},i.prototype.bindButtonEvents=function(t,e){var n,i,r,s,o=this;null==t.events&&(t.events={}),null!=t.action&&(t.events.click=t.action),s=t.events;for(n in s)i=s[n],"string"==typeof i&&(r=i,i=function(){return o.tour.show(r)}),e.addEventListener(n,i);return this.on("destroy",function(){var r,s;r=t.events,s=[];for(n in r)i=r[n],s.push(e.removeEventListener(n,i));return s})},i}(n),s=function(t){function e(t){var e,n,r,s,o,h,l=this;for(this.options=null!=t?t:{},this.hide=m(this.hide,this),this.complete=m(this.complete,this),this.cancel=m(this.cancel,this),this.back=m(this.back,this),this.next=m(this.next,this),this.steps=null!=(o=this.options.steps)?o:[],h=["complete","cancel","hide","start","show","active","inactive"],n=function(t){return l.on(t,function(e){return null==e&&(e={}),e.tour=l,i.trigger(t,e)})},r=0,s=h.length;s>r;r++)e=h[r],n(e)}return g(e,t),e.prototype.addStep=function(t,e){var n;return null==e&&(e=t),e instanceof r?e.tour=this:(("string"==(n=typeof t)||"number"===n)&&(e.id=t.toString()),e=l({},this.options.defaults,e),e=new r(this,e)),this.steps.push(e),this},e.prototype.getById=function(t){var e,n,i,r;for(r=this.steps,n=0,i=r.length;i>n;n++)if(e=r[n],e.id===t)return e},e.prototype.getCurrentStep=function(){return this.currentStep},e.prototype.next=function(){var t;return t=this.steps.indexOf(this.currentStep),t===this.steps.length-1?(this.hide(t),this.trigger("complete"),this.done()):this.show(t+1)},e.prototype.back=function(){var t;return t=this.steps.indexOf(this.currentStep),this.show(t-1)},e.prototype.cancel=function(){var t;return null!=(t=this.currentStep)&&t.hide(),this.trigger("cancel"),this.done()},e.prototype.complete=function(){var t;return null!=(t=this.currentStep)&&t.hide(),this.trigger("complete"),this.done()},e.prototype.hide=function(){var t;return null!=(t=this.currentStep)&&t.hide(),this.trigger("hide"),this.done()},e.prototype.done=function(){return i.activeTour=null,a(document.body,"shepherd-active"),this.trigger("inactive",{tour:this})},e.prototype.show=function(t){var e;return null==t&&(t=0),this.currentStep?this.currentStep.hide():(o(document.body,"shepherd-active"),this.trigger("active",{tour:this})),i.activeTour=this,e="string"==typeof t?this.getById(t):this.steps[t],e?(this.trigger("show",{step:e,previous:this.currentStep}),this.currentStep=e,e.show()):void 0},e.prototype.start=function(){return this.trigger("start"),this.currentStep=null,this.next()},e}(n),l(i,{Tour:s,Step:r,Evented:n}),window.Shepherd=i}.call(this),Shepherd});